Write-Host "ğŸš€ Starting Blue-Green Deployment..."

Write-Host "ğŸŸ¦ Deploying BLUE version..."
kubectl apply -f blue_deployment.yaml

Write-Host "ğŸŸ© Deploying GREEN version..."
kubectl apply -f green_deployment.yaml

Write-Host "ğŸ” Applying service..."
kubectl apply -f kubeservice.yaml

Write-Host "ğŸ“¦ Current running pods:"
kubectl get pods -l app=messaging-app

Write-Host "ğŸ§  Checking GREEN pod logs..."
# Get the first green pod
$greenPod = kubectl get pods -l version=green -o jsonpath="{.items[0].metadata.name}"
kubectl logs $greenPod

Write-Host "âœ… Blue-Green deployment completed!"
